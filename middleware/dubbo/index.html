<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/assets/img/favicon.ico"><meta name="keywords" content="我的笔记,我写的bug,我的项目总结"><meta name="author" content="shawn chiou"><title>today is wendy</title><meta name="description" content="red velet">
    <link rel="preload" href="/assets/style-a57c0936.css" as="style"><link rel="stylesheet" href="/assets/style-a57c0936.css">
    <link rel="modulepreload" href="/assets/app-ef69076c.js"><link rel="modulepreload" href="/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/assets/index.html-de083618.js"><link rel="modulepreload" href="/assets/index.html-665fd609.js"><link rel="prefetch" href="/assets/index.html-dfbe9556.js" as="script"><link rel="prefetch" href="/assets/index.html-c4b64f44.js" as="script"><link rel="prefetch" href="/assets/index.html-0cb2515f.js" as="script"><link rel="prefetch" href="/assets/index.html-e2124684.js" as="script"><link rel="prefetch" href="/assets/index.html-f31aaa0b.js" as="script"><link rel="prefetch" href="/assets/index.html-d05a89f0.js" as="script"><link rel="prefetch" href="/assets/index.html-6caca420.js" as="script"><link rel="prefetch" href="/assets/index.html-050e6d2d.js" as="script"><link rel="prefetch" href="/assets/index.html-20301b2b.js" as="script"><link rel="prefetch" href="/assets/index.html-8cd0288d.js" as="script"><link rel="prefetch" href="/assets/index.html-f1db0db6.js" as="script"><link rel="prefetch" href="/assets/index.html-84963917.js" as="script"><link rel="prefetch" href="/assets/index.html-e2956c81.js" as="script"><link rel="prefetch" href="/assets/index.html-4a2719a8.js" as="script"><link rel="prefetch" href="/assets/index.html-42939c2e.js" as="script"><link rel="prefetch" href="/assets/index.html-958f44be.js" as="script"><link rel="prefetch" href="/assets/index.html-54bdc300.js" as="script"><link rel="prefetch" href="/assets/index.html-4776a144.js" as="script"><link rel="prefetch" href="/assets/index.html-e3629969.js" as="script"><link rel="prefetch" href="/assets/index.html-d2c50628.js" as="script"><link rel="prefetch" href="/assets/index.html-cf9c6ae9.js" as="script"><link rel="prefetch" href="/assets/index.html-4f23660b.js" as="script"><link rel="prefetch" href="/assets/index.html-7354959b.js" as="script"><link rel="prefetch" href="/assets/index.html-83663ad4.js" as="script"><link rel="prefetch" href="/assets/index.html-32ff62b4.js" as="script"><link rel="prefetch" href="/assets/index.html-dd4d473a.js" as="script"><link rel="prefetch" href="/assets/index.html-6f5cc933.js" as="script"><link rel="prefetch" href="/assets/index.html-a074904e.js" as="script"><link rel="prefetch" href="/assets/index.html-c3e95a57.js" as="script"><link rel="prefetch" href="/assets/index.html-19d72577.js" as="script"><link rel="prefetch" href="/assets/index.html-7ff6f7f3.js" as="script"><link rel="prefetch" href="/assets/index.html-c453dac3.js" as="script"><link rel="prefetch" href="/assets/index.html-58f941bb.js" as="script"><link rel="prefetch" href="/assets/index.html-4d7012f2.js" as="script"><link rel="prefetch" href="/assets/index.html-58cd134a.js" as="script"><link rel="prefetch" href="/assets/index.html-5dd4fc32.js" as="script"><link rel="prefetch" href="/assets/index.html-02996208.js" as="script"><link rel="prefetch" href="/assets/index.html-6c5243ac.js" as="script"><link rel="prefetch" href="/assets/index.html-e3a7860a.js" as="script"><link rel="prefetch" href="/assets/index.html-75fb17b5.js" as="script"><link rel="prefetch" href="/assets/index.html-0363e03a.js" as="script"><link rel="prefetch" href="/assets/index.html-780b6c98.js" as="script"><link rel="prefetch" href="/assets/index.html-987afb41.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-b809455c.js" as="script"><link rel="prefetch" href="/assets/index.html-9640916a.js" as="script"><link rel="prefetch" href="/assets/index.html-43263a42.js" as="script"><link rel="prefetch" href="/assets/index.html-aa4a5724.js" as="script"><link rel="prefetch" href="/assets/index.html-2bcdbbfc.js" as="script"><link rel="prefetch" href="/assets/index.html-038094b0.js" as="script"><link rel="prefetch" href="/assets/index.html-104f6032.js" as="script"><link rel="prefetch" href="/assets/index.html-a7a34cb3.js" as="script"><link rel="prefetch" href="/assets/index.html-257a2875.js" as="script"><link rel="prefetch" href="/assets/index.html-5bbb4d34.js" as="script"><link rel="prefetch" href="/assets/index.html-b60e38b2.js" as="script"><link rel="prefetch" href="/assets/index.html-8b4c8e5a.js" as="script"><link rel="prefetch" href="/assets/index.html-831f4564.js" as="script"><link rel="prefetch" href="/assets/index.html-a643b241.js" as="script"><link rel="prefetch" href="/assets/index.html-6247f754.js" as="script"><link rel="prefetch" href="/assets/index.html-5af0b25d.js" as="script"><link rel="prefetch" href="/assets/index.html-b72b9b50.js" as="script"><link rel="prefetch" href="/assets/index.html-57fbb26b.js" as="script"><link rel="prefetch" href="/assets/index.html-82c3cf0c.js" as="script"><link rel="prefetch" href="/assets/index.html-e0921418.js" as="script"><link rel="prefetch" href="/assets/index.html-c1f61992.js" as="script"><link rel="prefetch" href="/assets/index.html-375ba26e.js" as="script"><link rel="prefetch" href="/assets/index.html-4ba5fb7a.js" as="script"><link rel="prefetch" href="/assets/index.html-4be893a6.js" as="script"><link rel="prefetch" href="/assets/index.html-3c2e22a4.js" as="script"><link rel="prefetch" href="/assets/index.html-f49bac44.js" as="script"><link rel="prefetch" href="/assets/index.html-81c0ead7.js" as="script"><link rel="prefetch" href="/assets/index.html-ce50724d.js" as="script"><link rel="prefetch" href="/assets/index.html-3e1b5067.js" as="script"><link rel="prefetch" href="/assets/index.html-b695183c.js" as="script"><link rel="prefetch" href="/assets/index.html-13041d31.js" as="script"><link rel="prefetch" href="/assets/index.html-808f12ca.js" as="script"><link rel="prefetch" href="/assets/index.html-da3ddf3c.js" as="script"><link rel="prefetch" href="/assets/index.html-e5b92dc3.js" as="script"><link rel="prefetch" href="/assets/index.html-4ebaf138.js" as="script"><link rel="prefetch" href="/assets/index.html-98c8ae3e.js" as="script"><link rel="prefetch" href="/assets/index.html-56bdca2a.js" as="script"><link rel="prefetch" href="/assets/index.html-7d5c0d7d.js" as="script"><link rel="prefetch" href="/assets/index.html-7ea4c8df.js" as="script"><link rel="prefetch" href="/assets/index.html-ca94e038.js" as="script"><link rel="prefetch" href="/assets/index.html-b1d6d9f1.js" as="script"><link rel="prefetch" href="/assets/index.html-1b4e1a3f.js" as="script"><link rel="prefetch" href="/assets/index.html-23e9a067.js" as="script"><link rel="prefetch" href="/assets/404.html-87d54bd8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">today is wendy</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Bug总结"><span class="title">Bug总结</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Bug总结"><span class="title">Bug总结</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/bugs/ui/" class="" aria-label="前端bug"><!--[--><!--]--> 前端bug <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/bugs/sql/" class="" aria-label="数据库bug"><!--[--><!--]--> 数据库bug <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/bugs/backend/" class="" aria-label="后端bug"><!--[--><!--]--> 后端bug <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/bugs/other/" class="" aria-label="其它bug"><!--[--><!--]--> 其它bug <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="理论基础"><span class="title">理论基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="理论基础"><span class="title">理论基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/408/os/" class="" aria-label="操作系统"><!--[--><!--]--> 操作系统 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/408/network/" class="" aria-label="计算机网络"><!--[--><!--]--> 计算机网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/408/dsa/" class="" aria-label="数据结构和算法"><!--[--><!--]--> 数据结构和算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/408/pcc/" class="" aria-label="计算机组成原理"><!--[--><!--]--> 计算机组成原理 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库相关"><span class="title">数据库相关</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库相关"><span class="title">数据库相关</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mysql/" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/redis/" class="" aria-label="redis"><!--[--><!--]--> redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/oracle/" class="" aria-label="oracle"><!--[--><!--]--> oracle <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/dm/" class="" aria-label="达梦"><!--[--><!--]--> 达梦 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/foundation/jdbc/" class="" aria-label="jdbc"><!--[--><!--]--> jdbc <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/mybatis/" class="" aria-label="mybatis"><!--[--><!--]--> mybatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/mybatis-plus/" class="" aria-label="mybatis-plus"><!--[--><!--]--> mybatis-plus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/hibernate/" class="" aria-label="hibernate"><!--[--><!--]--> hibernate <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java基础"><span class="title">Java基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java基础"><span class="title">Java基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/foundation/javase/" class="" aria-label="javase"><!--[--><!--]--> javase <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/foundation/javaweb/" class="" aria-label="javaweb"><!--[--><!--]--> javaweb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java框架"><span class="title">Java框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java框架"><span class="title">Java框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/frameworks/maven/" class="" aria-label="maven"><!--[--><!--]--> maven <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/design/" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/log/" class="" aria-label="日志框架"><!--[--><!--]--> 日志框架 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/spring/" class="" aria-label="spring"><!--[--><!--]--> spring <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/springmvc/" class="" aria-label="springmvc"><!--[--><!--]--> springmvc <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/springboot/" class="" aria-label="springboot"><!--[--><!--]--> springboot <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="分布式与中间件"><span class="title">分布式与中间件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="分布式与中间件"><span class="title">分布式与中间件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/frameworks/springcloud/" class="" aria-label="springcloud"><!--[--><!--]--> springcloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/middleware/dubbo/" class="router-link-active router-link-exact-active router-link-active" aria-label="dubbo"><!--[--><!--]--> dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/elk/" class="" aria-label="elk"><!--[--><!--]--> elk <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/rabbitmq/" class="" aria-label="rabbitMQ"><!--[--><!--]--> rabbitMQ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/rocketmq/" class="" aria-label="rocketMQ"><!--[--><!--]--> rocketMQ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="运维相关"><span class="title">运维相关</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="运维相关"><span class="title">运维相关</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/op/linux" class="" aria-label="linux"><!--[--><!--]--> linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/op/docker/" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/op/nginx/" class="" aria-label="nginx"><!--[--><!--]--> nginx <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/op/kylin-v10/" class="" aria-label="麒麟v10"><!--[--><!--]--> 麒麟v10 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="项目菜单"><span class="title">项目</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="项目菜单"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/project/super-array/" class="" aria-label="超级数组"><!--[--><!--]--> 超级数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/reflect-annotation/" class="" aria-label="反射+注解实战"><!--[--><!--]--> 反射+注解实战 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/multi-user/" class="" aria-label="多用户即时通讯"><!--[--><!--]--> 多用户即时通讯 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/my-servlet/" class="" aria-label="手写servlet容器"><!--[--><!--]--> 手写servlet容器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/health/" class="" aria-label="传智健康"><!--[--><!--]--> 传智健康 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/short-message/" class="" aria-label="动力短信"><!--[--><!--]--> 动力短信 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/luxury/" class="" aria-label="二奢商城"><!--[--><!--]--> 二奢商城 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/BlueBeastMight/BlueBeastMight.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索文档" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Bug总结"><span class="title">Bug总结</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Bug总结"><span class="title">Bug总结</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/bugs/ui/" class="" aria-label="前端bug"><!--[--><!--]--> 前端bug <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/bugs/sql/" class="" aria-label="数据库bug"><!--[--><!--]--> 数据库bug <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/bugs/backend/" class="" aria-label="后端bug"><!--[--><!--]--> 后端bug <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/bugs/other/" class="" aria-label="其它bug"><!--[--><!--]--> 其它bug <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="理论基础"><span class="title">理论基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="理论基础"><span class="title">理论基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/408/os/" class="" aria-label="操作系统"><!--[--><!--]--> 操作系统 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/408/network/" class="" aria-label="计算机网络"><!--[--><!--]--> 计算机网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/408/dsa/" class="" aria-label="数据结构和算法"><!--[--><!--]--> 数据结构和算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/408/pcc/" class="" aria-label="计算机组成原理"><!--[--><!--]--> 计算机组成原理 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库相关"><span class="title">数据库相关</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库相关"><span class="title">数据库相关</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mysql/" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/redis/" class="" aria-label="redis"><!--[--><!--]--> redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/oracle/" class="" aria-label="oracle"><!--[--><!--]--> oracle <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/dm/" class="" aria-label="达梦"><!--[--><!--]--> 达梦 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/foundation/jdbc/" class="" aria-label="jdbc"><!--[--><!--]--> jdbc <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/mybatis/" class="" aria-label="mybatis"><!--[--><!--]--> mybatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/mybatis-plus/" class="" aria-label="mybatis-plus"><!--[--><!--]--> mybatis-plus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/hibernate/" class="" aria-label="hibernate"><!--[--><!--]--> hibernate <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java基础"><span class="title">Java基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java基础"><span class="title">Java基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/foundation/javase/" class="" aria-label="javase"><!--[--><!--]--> javase <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/foundation/javaweb/" class="" aria-label="javaweb"><!--[--><!--]--> javaweb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java框架"><span class="title">Java框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java框架"><span class="title">Java框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/frameworks/maven/" class="" aria-label="maven"><!--[--><!--]--> maven <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/design/" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/log/" class="" aria-label="日志框架"><!--[--><!--]--> 日志框架 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/spring/" class="" aria-label="spring"><!--[--><!--]--> spring <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/springmvc/" class="" aria-label="springmvc"><!--[--><!--]--> springmvc <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/frameworks/springboot/" class="" aria-label="springboot"><!--[--><!--]--> springboot <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="分布式与中间件"><span class="title">分布式与中间件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="分布式与中间件"><span class="title">分布式与中间件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/frameworks/springcloud/" class="" aria-label="springcloud"><!--[--><!--]--> springcloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/middleware/dubbo/" class="router-link-active router-link-exact-active router-link-active" aria-label="dubbo"><!--[--><!--]--> dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/elk/" class="" aria-label="elk"><!--[--><!--]--> elk <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/rabbitmq/" class="" aria-label="rabbitMQ"><!--[--><!--]--> rabbitMQ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/rocketmq/" class="" aria-label="rocketMQ"><!--[--><!--]--> rocketMQ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="运维相关"><span class="title">运维相关</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="运维相关"><span class="title">运维相关</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/op/linux" class="" aria-label="linux"><!--[--><!--]--> linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/op/docker/" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/op/nginx/" class="" aria-label="nginx"><!--[--><!--]--> nginx <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/op/kylin-v10/" class="" aria-label="麒麟v10"><!--[--><!--]--> 麒麟v10 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="项目菜单"><span class="title">项目</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="项目菜单"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/project/super-array/" class="" aria-label="超级数组"><!--[--><!--]--> 超级数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/reflect-annotation/" class="" aria-label="反射+注解实战"><!--[--><!--]--> 反射+注解实战 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/multi-user/" class="" aria-label="多用户即时通讯"><!--[--><!--]--> 多用户即时通讯 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/my-servlet/" class="" aria-label="手写servlet容器"><!--[--><!--]--> 手写servlet容器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/health/" class="" aria-label="传智健康"><!--[--><!--]--> 传智健康 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/short-message/" class="" aria-label="动力短信"><!--[--><!--]--> 动力短信 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project/luxury/" class="" aria-label="二奢商城"><!--[--><!--]--> 二奢商城 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/BlueBeastMight/BlueBeastMight.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/middleware/dubbo/#dubbo" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/middleware/dubbo/#_1-分布式系统中的相关概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 分布式系统中的相关概念"><!--[--><!--]--> 1. 分布式系统中的相关概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/middleware/dubbo/#_2-dubbo-概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.  Dubbo 概述"><!--[--><!--]--> 2.  Dubbo 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/middleware/dubbo/#_3-dubbo-快速入门" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Dubbo 快速入门"><!--[--><!--]--> 3. Dubbo 快速入门 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/middleware/dubbo/#_4-dubbo-高级特性" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. Dubbo 高级特性"><!--[--><!--]--> 4. Dubbo 高级特性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="dubbo" tabindex="-1"><a class="header-anchor" href="#dubbo" aria-hidden="true">#</a> Dubbo</h2><h3 id="_1-分布式系统中的相关概念" tabindex="-1"><a class="header-anchor" href="#_1-分布式系统中的相关概念" aria-hidden="true">#</a> 1. 分布式系统中的相关概念</h3><h4 id="_1-1-大型互联网项目架构目标" tabindex="-1"><a class="header-anchor" href="#_1-1-大型互联网项目架构目标" aria-hidden="true">#</a> 1.1 大型互联网项目架构目标</h4><ol><li><p>传统项目和互联网项目</p><p><img src="/assets/image-20200812091024406-16773964563381-bda424f1.png" alt="image-20200812091024406"></p></li><li><p>用户体验</p><p>美观、功能、速度、稳定性</p></li><li><p>衡量一个网站速度是否快</p><p>• 打开一个新页面一瞬间完成；页面内跳转，一刹那间完成。</p><p>• 根据佛经《僧祇律》记载：一刹那者为一念，二十念为一瞬，二十瞬为一弹 指，二十弹指为一罗预，二十罗预为一须臾，一日一夜有三十须臾。</p><p>• 经过周密的计算，一瞬间为0.36 秒,一刹那有 0.018 秒</p><p>服务端的速度 要求 100ms左右</p></li></ol><h5 id="大型互联网项目架构目标" tabindex="-1"><a class="header-anchor" href="#大型互联网项目架构目标" aria-hidden="true">#</a> 大型互联网项目架构目标：</h5><ol><li><p>互联网项目特点：</p><p>• 用户多</p><p>• 流量大，并发高</p><p>• 海量数据</p><p>• 易受攻击</p><p>• 功能繁琐</p><p>• 变更快</p><p>• 高性能：提供快速的访问体验。</p></li><li><p>衡量网站的性能指标：</p><ol><li>响应时间：指执行一个请求从开始到最后收到响应数据所花费的总体时间。</li><li>并发数：指系统同时能处理的请求数量。 <ol><li>并发连接数：指的是客户端向服务器发起请求，并建立了TCP连接。每秒钟服务器连接的总TCP数量 <ol><li>同时连接的数量</li></ol></li><li>请求数：也称为QPS(Query Per Second) 指每秒多少请求. <ol><li>一个请求就是一个QPS</li></ol></li><li>并发用户数：单位时间内有多少用户</li></ol></li><li>吞吐量：指单位时间内系统能处理的请求数量。 <ol><li>QPS：Query Per Second 每秒查询数。</li><li>TPS：Transactions Per Second 每秒事务数</li><li>一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束 计时，以此来计算使用的时间和完成的事务个数。</li><li>一个页面的一次访问，只会形成一个TPS；但一次页面请求，可能产生多次对服务器的请求，就会有多个QPS</li><li>QPS &gt;= 并发连接数 &gt;= TPS</li></ol></li><li>高性能：提供快速的访问体验</li><li>高可用：网站服务一直可以正常访问。 <ol><li>最重要的, 高并发，高可用</li></ol></li><li>可伸缩：通过硬件增加/减少，提高/降低处理能力。</li><li>高可扩展：系统间耦合低，方便的通过新增/移除方式，增加/减 少新的功能/模块。</li><li>安全性：提供网站安全访问和数据加密，安全存储等策略。</li><li>敏捷性：随需应变，快速响应。</li></ol></li></ol><h4 id="_1-2-集群和分布式" tabindex="-1"><a class="header-anchor" href="#_1-2-集群和分布式" aria-hidden="true">#</a> 1.2 集群和分布式</h4><ol><li>集群：很多“人”一起 ，干一样的事。</li><li>分布式：很多“人”一起，干不一样的事。这些不一样的事，合起来是一件大事。</li></ol><p><img src="/assets/image-20200812094148633-d02f2279.png" alt="image-20200812094148633"></p><p><img src="/assets/image-20200812094206597-eb49400d.png" alt="image-20200812094206597"></p><p><img src="/assets/image-20200812094220669-376b060e.png" alt="image-20200812094220669"></p><p><img src="/assets/image-20200812094236989-b556084f.png" alt="image-20200812094236989"></p><p>总结：</p><p>​ 集群：很多“人”一起 ，干一样的事。</p><p>​ 一个业务模块，部署在多台服务器上。</p><p>分布式：很多“人”一起，干不一样的事。这些不一样的事，合起来是一件大事。</p><p>​ 一个大的业务系统，拆分为小的业务模块，分别部署在不同的机器上。</p><h4 id="_1-3-架构演进" tabindex="-1"><a class="header-anchor" href="#_1-3-架构演进" aria-hidden="true">#</a> 1.3 架构演进</h4><p><img src="/assets/image-20200812094340547-3a1cd0e3.png" alt="image-20200812094340547"></p><h5 id="_1-3-1-架构演进-单体架构" tabindex="-1"><a class="header-anchor" href="#_1-3-1-架构演进-单体架构" aria-hidden="true">#</a> 1.3.1 架构演进--单体架构</h5><p><img src="/assets/image-20200812094418345-2e570fcc.png" alt="image-20200812094418345"></p><p>优点：</p><p>​ 简单：开发部署都很方便，小型项目首选</p><p>缺点：</p><p>​ 1. 项目启动慢</p><pre><code>2. 可靠性差
3. 可伸缩性差
4. 扩展性和可维护性差
5. 性能低
</code></pre><h5 id="_1-3-2-架构演进-垂直架构" tabindex="-1"><a class="header-anchor" href="#_1-3-2-架构演进-垂直架构" aria-hidden="true">#</a> 1.3.2 架构演进--垂直架构</h5><p><img src="/assets/image-20200812094527376-0b7f308f.png" alt="image-20200812094527376"></p><ol><li>垂直架构是指将单体架构中的多个模块拆分为多个独立的项目。形成多个独立的单 体架构。</li><li>单体架构存在的问题： <ol><li>项目启动慢</li><li>可靠性差</li><li>可伸缩性差</li><li>扩展性和可维护性差</li><li>性能低</li></ol></li><li>垂直架构存在的问题： <ol><li>重复功能太多</li></ol></li></ol><h5 id="_1-3-3-架构演进-分布式架构" tabindex="-1"><a class="header-anchor" href="#_1-3-3-架构演进-分布式架构" aria-hidden="true">#</a> 1.3.3 架构演进--分布式架构</h5><p><img src="/assets/image-20200812094753648-e712ffda.png" alt="image-20200812094753648"></p><ol><li>分布式架构是指在垂直架构的基础上，将公共业务模块抽取出来，作为独立的服务 ，供其他调用者消费，以实现服务的共享和重用。</li><li>RPC： Remote Procedure Call 远程过程调用。有非常多的协议和技术来都实现 了RPC的过程。比如：HTTP REST风格，Java RMI规范、WebService SOAP协议 、Hession等等。</li><li>垂直架构存在的问题： <ol><li>重复功能太多</li></ol></li><li>分布式架构存在的问题： <ol><li>服务提供方一旦产生变更，所有消费方都需要变更。</li></ol></li></ol><h5 id="_1-3-4-架构演进-soa架构" tabindex="-1"><a class="header-anchor" href="#_1-3-4-架构演进-soa架构" aria-hidden="true">#</a> 1.3.4 架构演进--SOA架构</h5><p><img src="/assets/image-20200812094924344-35e7c75f.png" alt="image-20200812094924344"></p><ol><li>SOA：（Service-Oriented Architecture，面向服务的架构）是一个组件模型， 它将应用程序的不同功能单元（称为服务）进行拆分，并通过这些服务之间定义良 好的接口和契约联系起来。</li><li>ESB：(Enterparise Servce Bus) 企业服务总线，服务中介。主要是提供了一个服 务于服务之间的交互。ESB 包含的功能如：负载均衡，流量控制，加密处理，服务 的监控，异常处理，监控告急等等。</li><li>分布式架构存在的问题： <ol><li>服务提供方一旦产生变更，所有消费方都需要变更</li></ol></li></ol><h5 id="_1-3-5-架构演进-微服务架构" tabindex="-1"><a class="header-anchor" href="#_1-3-5-架构演进-微服务架构" aria-hidden="true">#</a> 1.3.5 架构演进--微服务架构</h5><ol><li>微服务架构是在 SOA 上做的升华，微服务架构强调的一个重点是“业务需要彻底的组件化和服务化”，原有的单个 业务系统会拆分为多个可以独立开发、设计、运行的小应用。这些小应用之间通过服务完成交互和集成。</li><li>微服务架构 = 80%的SOA服务架构思想 + 100%的组件化架构思想 + 80%的领域建模思想</li></ol><p><img src="/assets/image-20200812100612331-36f4b403.png" alt="image-20200812100612331"></p><p>特点：</p><pre><code>1.	服务实现组件化：开发者可以自由选择开发技术。也 不需要协调其他团队
2.	服务之间交互一般使用REST API
3.	去中心化：每个微服务有自己私有的数据库持久化业 务数据
4.	自动化部署：把应用拆分成为一个一个独立的单个服 务，方便自动化部署、测试、运维
</code></pre><p>总结：</p><p>Dubbo 是 SOA时代的产物，SpringCloud 是微服务时代的产物</p><p><img src="/assets/image-20200812100656407-7461d761.png" alt="image-20200812100656407"></p><h3 id="_2-dubbo-概述" tabindex="-1"><a class="header-anchor" href="#_2-dubbo-概述" aria-hidden="true">#</a> 2. Dubbo 概述</h3><h4 id="_2-1-dubbo概念" tabindex="-1"><a class="header-anchor" href="#_2-1-dubbo概念" aria-hidden="true">#</a> 2.1 Dubbo概念</h4><ol><li>Dubbo是阿里巴巴公司开源的一个高性能、轻量级的 Java RPC 框架</li><li>致力于提供高性能和透明化的 RPC 远程服务调用方案，以及 SOA 服务治理方案。</li><li>官网：http://dubbo.apache.org</li></ol><h4 id="_2-2-dubbo架构-面试题" tabindex="-1"><a class="header-anchor" href="#_2-2-dubbo架构-面试题" aria-hidden="true">#</a> 2.2 Dubbo架构 面试题</h4><p><img src="/assets/image-20200812100758742-6211bcb0.png" alt="image-20200812100758742"></p><p>​ <img src="/assets/image-20200609150003530-79be8a3d.png" alt="image-20200609150003530"></p><p>节点角色说明:</p><pre><code>1.	Provider：暴露服务的服务提供方
2.	Container：服务运行容器
3.	Consumer：调用远程服务的服务消费方
4.	Registry：服务注册与发现的注册中心
5.	Monitor：统计服务的调用次数和调用时间的监控中心
</code></pre><h3 id="_3-dubbo-快速入门" tabindex="-1"><a class="header-anchor" href="#_3-dubbo-快速入门" aria-hidden="true">#</a> 3. Dubbo 快速入门</h3><h4 id="_3-1-zookeeper安装" tabindex="-1"><a class="header-anchor" href="#_3-1-zookeeper安装" aria-hidden="true">#</a> 3.1 Zookeeper安装</h4><p>Dubbo官方推荐使用Zookeeper作为注册中心</p><h4 id="_3-2-dubbo快速入门-重点" tabindex="-1"><a class="header-anchor" href="#_3-2-dubbo快速入门-重点" aria-hidden="true">#</a> 3.2 Dubbo快速入门-重点</h4><p>实现步骤：</p><ol><li>创建服务提供者Provider模块</li><li>创建服务消费者Consumer模块</li><li>在服务提供者模块编写 UserServiceImpl 提供服务</li><li>在服务消费者中的 UserController 远程调用 UserServiceImpl 提供的服务</li><li>分别启动两个服务，测试</li></ol><p><img src="/assets/image-20200812101459209-81079551.png" alt="image-20200812101459209"></p><p><img src="/assets/image-20200812101516092-1d136768.png" alt="image-20200812101516092"></p><h5 id="_3-2-1创建springmvc工程dubbo-pro" tabindex="-1"><a class="header-anchor" href="#_3-2-1创建springmvc工程dubbo-pro" aria-hidden="true">#</a> 3.2.1创建springmvc工程dubbo-pro</h5><ol><li><p>新建<strong>dubbo-web</strong>模块。在pom.xml 中导入依赖,packaging为war</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.version</span><span class="token punctuation">&gt;</span></span>5.1.9.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dubbo.version</span><span class="token punctuation">&gt;</span></span>2.7.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dubbo.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zookeeper.version</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zookeeper.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- servlet3.0规范的坐标 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring的坐标--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--springmvc的坐标--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--日志--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>



        <span class="token comment">&lt;!--Dubbo的起步依赖，版本2.7之后统一为org.apache.dubbo --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dubbo.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ZooKeeper客户端实现 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${zookeeper.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ZooKeeper客户端实现 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-recipes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${zookeeper.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>



        <span class="token comment">&lt;!--依赖service模块--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo-service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--tomcat插件--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>8000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>新建<strong>dubbo-service</strong>模块，pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo-service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.version</span><span class="token punctuation">&gt;</span></span>5.1.9.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dubbo.version</span><span class="token punctuation">&gt;</span></span>2.7.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dubbo.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zookeeper.version</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zookeeper.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- servlet3.0规范的坐标 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring的坐标--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--springmvc的坐标--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--日志--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>



        <span class="token comment">&lt;!--Dubbo的起步依赖，版本2.7之后统一为rg.apache.dubb --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dubbo.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ZooKeeper客户端实现 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${zookeeper.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ZooKeeper客户端实现 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-recipes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${zookeeper.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>dubbo-service模块中，新建一个UserService,以及impl</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello dubbo&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>dubbo-service模块中,放入资料中的spring配置文件和日志配置文件</p><p><img src="/assets/image-20210319165542585-29cd966b.png" alt="image-20210319165542585"></p><p>并且在xml中，进行扫包</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;context:component-scan base-package=&quot;com.itheima.service&quot; /&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>dubbo-web中，新建webapp-&gt;WEB-INF-&gt;web.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2.5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>


    <span class="token comment">&lt;!-- spring --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath*:spring/applicationContext*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- Springmvc --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 指定加载的配置文件 ，通过参数contextConfigLocation加载--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:spring/springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>dubbo-web中,复制资料中的springmvc配置文件和日志配置文件</p><p><img src="/assets/image-20210319170343365-5d0d1ad1.png" alt="image-20210319170343365"></p><p>并且加上</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>dubbo-web中,创建controller</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper<span class="token punctuation">.</span>server<span class="token punctuation">.</span>admin<span class="token punctuation">.</span></span><span class="token class-name">Commands</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sayHello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>service工程imstall,启动web工程</p><p><img src="data:image/png;base64,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" alt="image-20210319170934584"></p><p>访问：http://localhost:8000/user/sayHello.do</p></li></ol><h5 id="_3-2-2改造service" tabindex="-1"><a class="header-anchor" href="#_3-2-2改造service" aria-hidden="true">#</a> 3.2.2改造service</h5><ol><li><p>已经导入dubbo包</p><p><img src="/assets/image-20210319171420424-c0ca70de.png" alt="image-20210319171420424"></p></li><li><p>打包方式改为war</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--tomcat插件--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>UserServiceImpl中 修改注解</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@Service //dubbo包  发布到dubbo中
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>配置 applicationContext.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>


	<span class="token comment">&lt;!--&lt;context:component-scan base-package=&quot;com.itheima.service&quot; /&gt;--&gt;</span>

	<span class="token comment">&lt;!--dubbo的配置--&gt;</span>
	<span class="token comment">&lt;!--1.配置项目的名称,唯一--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubbo-service<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token comment">&lt;!--2.配置注册中心的地址--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>registry</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zookeeper://192.168.200.130:2181<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token comment">&lt;!--3.配置dubbo包扫描--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>annotation</span> <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.service.impl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>新建webapp-&gt;WEB-INF-&gt;web.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- spring --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath*:spring/applicationContext*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>启动service工程</p></li></ol><h5 id="_3-2-3改造dubbo-web" tabindex="-1"><a class="header-anchor" href="#_3-2-3改造dubbo-web" aria-hidden="true">#</a> 3.2.3改造dubbo-web</h5><ol><li><p>依赖中去掉dubbo-service，创建UserService</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>pom.xml 已经导入依赖</p><p><img src="/assets/image-20210319172938211-da632778.png" alt="image-20210319172938211"></p></li><li><p>web.xml 去掉spring加载</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    &lt;context-param&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;param-value&gt;classpath*:spring/applicationContext*.xml&lt;/param-value&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;/context-param&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;listener&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;/listener&gt;--&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>改造controller</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Reference</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token comment">//注入Service</span>
    <span class="token comment">//@Autowired//本地注入</span>

    <span class="token comment">/*
        1. 从zookeeper注册中心获取userService的访问url
        2. 进行远程调用RPC
        3. 将结果封装为一个代理对象。给变量赋值
     */</span>

    <span class="token annotation punctuation">@Reference</span><span class="token comment">//远程注入</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sayHello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>改造springmvc.xml 加入</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>    &lt;!--dubbo的配置--&gt;
    &lt;!--1.配置项目的名称,唯一--&gt;
    &lt;dubbo:application name=&quot;dubbo-web&quot;/&gt;
    &lt;!--2.配置注册中心的地址--&gt;
    &lt;dubbo:registry address=&quot;zookeeper://192.168.200.130:2181&quot;/&gt;
    &lt;!--3.配置dubbo包扫描--&gt;
    &lt;dubbo:annotation package=&quot;com.itheima.controller&quot; /&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>启动web，访问http://localhost:8000/user/sayHello.do</p></li><li><p>问题解决，springmvc.xml修改监控端口</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubbo-web<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>parameter</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>qos.port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>33333<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">dubbo:</span>parameter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">dubbo:</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h5 id="_3-2-4深入改造" tabindex="-1"><a class="header-anchor" href="#_3-2-4深入改造" aria-hidden="true">#</a> 3.2.4深入改造</h5><p>目前问题，service和web都定义一次接口，麻烦。所以我们提取接口。</p><ol><li><p>新建工程dubbo-interface</p></li><li><p>复制UserService到interface工程</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>删除web和service工程中的接口</p></li><li><p>web和service工程中导入interface工程</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo-interface<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>interface工程install,重启web、service工程，测试</p></li></ol><p>默认调用：单一的长连接形式，NIO实现的，序列化与反序列化，hession协议实现的， hession协议本质上是一个http协议，输入和输出做了优化</p><h3 id="_4-dubbo-高级特性" tabindex="-1"><a class="header-anchor" href="#_4-dubbo-高级特性" aria-hidden="true">#</a> 4. Dubbo 高级特性</h3><h4 id="_4-1-dubbo-admin管理平台" tabindex="-1"><a class="header-anchor" href="#_4-1-dubbo-admin管理平台" aria-hidden="true">#</a> 4.1 dubbo-admin管理平台</h4><p>1安装nodejs</p><p>2ui 安装</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3admin</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>mvn clean package
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4启动ui</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm run dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5启动admin后端</p><p>distribution中</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -jar xxxx.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>dubbo-admin 管理平台，是图形化的服务管理页面</li><li>从注册中心中获取到所有的提供者 / 消费者进行配置管理</li><li>路由规则、动态配置、服务降级、访问控制、权重调整、 负载均衡等管理功能</li><li>dubbo-admin 是一个前后端分离的项目。前端使用vue ，后端使用springboot</li><li>安装 dubbo-admin 其实就是部署该项目</li></ol><h4 id="_4-2-dubbo-常用高级配置" tabindex="-1"><a class="header-anchor" href="#_4-2-dubbo-常用高级配置" aria-hidden="true">#</a> 4.2 dubbo 常用高级配置</h4><h5 id="_4-2-1-序列化" tabindex="-1"><a class="header-anchor" href="#_4-2-1-序列化" aria-hidden="true">#</a> 4.2.1 序列化</h5><p><img src="/assets/image-20200812101629625-9bd63d28.png" alt="image-20200812101629625"></p><p>hession协议，</p><p>两个机器传输数据，如何传输Java对象？</p><ol><li>dubbo 内部已经将序列化和反序列化的过程内部封装了</li><li>我们只需要在定义pojo类时实现Serializable接口即可</li><li>一般会定义一个公共的pojo模块，让生产者和消费者都依赖 该模块。</li></ol><p>代码实现</p><ol><li><p>创建模块dubbo-pojo</p></li><li><p>创建实体类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 注意！！！
 *  将来所有的pojo类都需要实现Serializable接口
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>interface service web三个工程导包pojo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>itheima<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>dubbo<span class="token operator">-</span>pojo<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>intterface工程接口添加方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * 查询用户
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>serviceimpl实现方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//查询User对象</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>web中controler新增方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/find&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>pojo、interface安装install。启动service、web测试http://localhost:8000/user/find.do?id=1</p></li></ol><h5 id="_4-2-2-地址缓存" tabindex="-1"><a class="header-anchor" href="#_4-2-2-地址缓存" aria-hidden="true">#</a> 4.2.2 地址缓存</h5><p>注册中心挂了，服务是否可以正常访问？ 面试题</p><ol><li>可以，因为dubbo服务消费者在第一次调用时， 会将服务提供方地址缓存到本地，以后在调用则 不会访问注册中心。</li><li>当服务提供者地址发生变化时，注册中心会通知 服务消费者。</li></ol><p>测试：关闭zk，还能调用成功。</p><h5 id="_4-2-3-超时与重试" tabindex="-1"><a class="header-anchor" href="#_4-2-3-超时与重试" aria-hidden="true">#</a> 4.2.3 超时与重试</h5><p><img src="/assets/image-20200812101740858-39550f18.png" alt="image-20200812101740858"></p><ol><li>服务消费者在调用服务提供者的时候发生了阻塞、等待的情形，这个时候，服务消费者会一直等待下去。</li><li>在某个峰值时刻，大量的请求都在同时请求服务消费者，会造成线程的大量堆积，势必会造成雪崩。</li><li>dubbo 利用超时机制来解决这个问题，设置一个超时时间，在这个时间段内，无法完成服务访问，则自动断开连接。 <ol><li>使用timeout属性配置超时时间，默认值1000，单位毫秒。</li></ol></li></ol><p><img src="/assets/image-20200812101839863-35f7f7be.png" alt="image-20200812101839863"></p><p><img src="/assets/image-20200812101944486-1193da26.png" alt="image-20200812101944486"></p><ol><li>设置了超时时间，在这个时间段内，无法完成服务访问，则自动断开连接。</li><li>如果出现网络抖动，则这一次请求就会失败。</li><li>Dubbo 提供重试机制来避免类似问题的发生。</li><li>通过 retries 属性来设置重试次数。默认为 2 次。</li></ol><p><strong>代码</strong>：</p><p>​ 1提供方超时：</p><p>​ 1.1提供方</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token comment">//@Service</span>
<span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span>timeout <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">,</span>retries <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//dubbo包  发布到dubbo中</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello dubbo interface&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//查询User对象</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//查询数据库很慢 5秒</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 1.2web调用方</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * 根据id查询用户信息
     * <span class="token keyword">@param</span> <span class="token parameter">id</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/find&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试，爆出错</p><p><img src="/assets/image-20210320002245424-b279d8f3.png" alt="image-20210320002245424"></p><p><img src="/assets/image-20210320002221609-f43ff817.png" alt="image-20210320002221609"></p><p>​ 2调用方超时</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@Reference(timeout = 1000)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>​ <strong>思考：到底几秒超时？</strong></p><p>​ <strong>结论</strong>：谁短谁超时！</p><p><strong>真实生产环境，建议只在提供方配置即可！</strong></p><p>重试：</p><p>提供方：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>package com.itheima.service.impl;

import com.itheima.pojo.User;
import com.itheima.service.UserService;
import org.apache.dubbo.config.annotation.Service;

//@Service
@Service(timeout = 3000,retries = 2) //dubbo包  发布到dubbo中
public class UserServiceImpl implements UserService {
    @Override
    public String sayHello() {
        return &quot;hello dubbo interface&quot;;
    }

    int i=1;
    @Override
    public User findUserById(int id) {
        System.out.println(&quot;服务被调用了：&quot;+i++);
        //查询User对象
        User user = new User(1,&quot;zhangsan&quot;,&quot;123&quot;);

        //查询数据库很慢 5秒
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return user;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试：</p><p><img src="data:image/png;base64,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" alt="image-20210320003153929"></p><h5 id="_4-2-4-多版本" tabindex="-1"><a class="header-anchor" href="#_4-2-4-多版本" aria-hidden="true">#</a> 4.2.4 多版本</h5><p><img src="/assets/image-20200812102026056-881193c8.png" alt="image-20200812102026056"></p><ol><li><strong>灰度发布</strong>：当出现新功能时，会让一部 分用户先使用新功能，用户反馈没问题 时，再将所有用户迁移到新功能</li><li>dubbo 中使用version 属性来设置和调 用同一个接口的不同版本</li></ol><p>代码：</p><p><strong>提供者</strong></p><p>1实现类：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@Service(version = &quot;v1.0&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2新增实现类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>


<span class="token comment">//@Service//将该类的对象创建出来，放到Spring的IOC容器中  bean定义</span>
<span class="token comment">//将这个类提供的方法（服务）对外发布。将访问的地址 ip，端口，路径注册到注册中心中</span>
<span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span>version <span class="token operator">=</span> <span class="token string">&quot;v2.0&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl2</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello dubbo hello!~&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;new....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//查询User对象</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3调用方</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@Reference(version = &quot;v2.0&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAAAhCAYAAADJXsXPAAADvUlEQVRoge2Zf0jcZRzHX9+bP3JGW2rm5jy37rzz7tRcRT+c/eHMmmnCRCT/qtUi+/GH1VxENSdIW/XHggWxtlzMCCT6p1U4tmJmQW1IEHrT8+48NZnhFIV5m3nepz90U0vkZIaP8Lzg4Pt8eN/D5+F1D/d8v19DRATNqmJa7QY0WoISaAkKoCUogJagAFqCAkQkIfTtCxhGIvvOuGl69XEcmzaSnPEQ5W810z2xyBeCfr57bw+FD1hISkgle0c5tafaGQ3PReTHGjYaOzn258x48NNdGEY6716YDbTVkmyU0TRyawtcCyxrJ/xxZB/HJ/OpfvsAz+cGaTn8NMW1LYzPD0kvJyofpPT9dpIKq6lv2E+Fa4Qv9uRRePBXrs3GDGsmuXTiC8yMfR43ZnOILu8YAFcCXobTnNgSb32RyiMRMHV6r4BJMvf/JMGb1SFpKt8gmKrk66tz2fBv70g6cVLe9Ne8GYJy/nWLEFMpX43PlqbPyct3ILtPXRGRYWkszZGamjJx1LeLiMjFOrtQ9rmMRNLgGmcZOyGagoJHiLs5vptHH7sfwl76BudS494u+rDg3DLF4ODg7GeUFKsL/r6Er382aLJgvxe6evsAP55OF/lPOhjv8hHkOoGeHszODBJW5KemNlGRR+NZv35hPDY2DhglND1XmwpNAR00FGyh4T9z2JkK3bhOw+qMp9sXYHJsku44B1VZm3G5vQTow+8Js/2JjOWuZ02yDAnLwU71yaOUp/67fhtbt924XofVnkO4uZcB/wSd2XYsKSk4L7fhCwbwdW7GmXHX/9OeYqy4hOioaMBE2n1FFOUsnd1qyyKm00+Hd4x1jhLijWQynG68v/TSfW07z1lXujs1WfH7hA3WTNLp4Yef/cw9np2mo/FFKioP0TrvSBtjtZN91cPZVjdZNguQisXhp6vlEh2pLmyLboRhzh3cTd7DRbzypYfQYhGlshEQyb/3zOkoQd5oXVi//FmJQK584J5XDPvleEmiEGORp147LEc/+VgO1RTLPVEmsb30/cLTzvVv5JmoFElLs8qBizMlz5E8MZvNQmmjDC/WzEiTlIEAgr1Ofl+qcRWyEbDyd8zGNvY2X+B0XT4T549R92Y9J9pg14dnOPtR8cLTTqyVzKwhBgZc2CwzpXSrk6H+flKdNpIWm//OHVRU2bk9bhM7ny3GtlQvKmQjwBDRL3VWG/3sSAG0BAXQEhRAS1AALUEBtAQF0BIUQEtQAC1BAbQEBdASFEBLUAAtQQG0BAXQEhTgH+pdip991GXqAAAAAElFTkSuQmCC" alt="image-20210320003831420"></p><h5 id="_4-2-5-负载均衡" tabindex="-1"><a class="header-anchor" href="#_4-2-5-负载均衡" aria-hidden="true">#</a> 4.2.5 负载均衡</h5><p><img src="/assets/image-20200812102055804-f1e19510.png" alt=""></p><p><img src="/assets/image-20200812102144740-2f8f506f.png" alt="image-20200812102144740"></p><p><img src="/assets/image-20200812102204376-8fec56fa.png" alt="image-20200812102204376"></p><p>负载均衡策略（4种） ：</p><ol><li>Random ：按权重随机，默认值。按权重设置随 机概率。</li><li>RoundRobin ：按权重轮询</li><li>LeastActive：最少活跃调用数，相同活跃数的随 机。</li><li>ConsistentHash：一致性 Hash，相同参数的请求 总是发到同一提供者。 <ol><li>hash(1)=12312311%3=1</li><li>hash(2)=123123132%3=2</li></ol></li></ol><p>测试：</p><p>1提供方 起三份</p><p>UserserviceImpl 权重分别为100 200 100</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@Service(weight = 100) 
public class UserServiceImpl implements UserService {

    public String sayHello() {
        return &quot;1......&quot;;
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pom.xml tomcat端口分别为9000 9001 9002</p><p><img src="/assets/image-20210320004412253-cef2e144.png" alt="image-20210320004412253"></p><p>applicationContext.xml 提供端口20880 20881 20882 监控端口22222 33333 44444</p><p><img src="/assets/image-20210320004500654-9ab9a317.png" alt="image-20210320004500654"></p><p>结果查看</p><p><img src="/assets/image-20210320005643799-749e8f86.png" alt="image-20210320005643799"></p><p>2调用方： 值为 random、roundrobin、leastactive、consistenthash （全局搜索AbstractLoadBalance）</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@Reference(loadbalance = &quot;random&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试：http://localhost:8000/user/sayHello.do</p><p>其余算法大家自己测试</p><h5 id="_4-2-6-集群容错" tabindex="-1"><a class="header-anchor" href="#_4-2-6-集群容错" aria-hidden="true">#</a> 4.2.6 集群容错</h5><p><img src="/assets/image-20200812102328620-29b4d0b2.png" alt="image-20200812102328620"></p><p>集群容错模式：</p><pre><code>1.  Failover Cluster：失败重试。默认值。当出现失败，重试其它 服务器 ，默认重试2次，使用 retries 配置。一般用于读操作
2.	Failfast Cluster ：快速失败，只发起一次调用，失败立即报错。 通常用于写操作。
3.	Failsafe Cluster ：失败安全，出现异常时，直接忽略。返回一 个空结果。
4.	Failback Cluster ：失败自动恢复，后台记录失败请求，定时 重发。通常用于消息通知操作。
5.	Forking Cluster ：并行调用多个服务器，只要一个成功即返回
6.	Broadcast Cluster ：广播调用所有提供者，逐个调用，任意 一台报错则报错。
</code></pre><p>代码：</p><p>1提供方：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>    int i=1;
    @Override
    public User findUserById(int id) {
        System.out.println(&quot;1 服务被调用了：&quot;+i++);
        //查询User对象
        User user = new User(1,&quot;zhangsan&quot;,&quot;123&quot;);

        //查询数据库很慢 5秒
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return user;
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>起三份 修改相应代码</p><p>第三份，去掉睡眠。</p><p>2调用方： 值搜索Cluster</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>  @Reference(version = &quot;v1.0&quot;,cluster = &quot;failover&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试：http://localhost:8000/user/find.do?id=1</p><p><img src="data:image/png;base64,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" alt="image-20210320011028692"></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALMAAAAeCAYAAABnli/DAAAJIklEQVR4nO2cf8gsVRnHP2sKxS2L6PaPXRHZeR3IJUoNZwyym2BzW2OtVkHRV+oyE5eg5rZXK1jMBgpzmZEiZV4u5kqmsP2YYJmjgqFm8/qHYLQip5kt0tLESksNycTTH/vj7u/d9969772+7Qde2J055znPOfud55w557k398xzf1esWPEW5aZfn9b/fOpLf3v2BLqyYsWxclb/U04ptYrMK3YEp5xoB1asWBYrMa/YMazEvGLHsBLzih3DSswrdgw7TMwCxzRxRHZUdQMnYFZV4Ryt7RXbwaknrGUR4Eidkt75KiOPhl4ncds4ZoReLaEPFD9yX5thM2KDAj5thGgPVsZr6FTrLtbU6hZuKSK35hCrEGtKKT0/o/2OEwSOpBi69EoKxyTSq/2+DiORkU4xtBi2nBE4NSgNj8M0ZOQhS3XC0Q5mgsGhmGMEr6FTT1zm9fKkRM3hjRceU+FXL1cXnP1etevdZ6hzP3a5qtz5uPrHG/NqziG2FXbc/5r6hrL9VCkVKxtbxWPFUfboxeESyjaMiWViG4Udq3SuU6mK4+mNxLah/PlGOn0b6EPqD/qVKt8YtBMrm0l2R8sdsW1McGL++MwhjZUNCsNerI/HwKtP/Vjt/9AuBSj23qb+siS7syPzy7/hG5fs5ZY/nkP5wA1cu+cU/vzQj/jBdRfygHyI5LsXsWuZT5auAdPCiIGen141Czyo1qlIhyAf0g/gWYC3YROr0cg3UFeIgVYljulBNSHMB3SCYyc2yhbIpkB0Q2XkdcuNhnGrgm+sIzOmzASFTlenft9msgBzXVKOU9T0qWsJvEb2069z9f7v8+SeS/n42ffz8BKtzxTz0z+5kVt+t4evPPgot+49vXPxy+ucf9UHuaJW45eHLuKq9y7Rm6lkyNas2wE1ulOsVQHHIaiEuJrAWW9QTpOpywYAzRoQeibxNgtULSCDVgsqvSVA5EHR6gg0C/AoUM1nMPaYaLhJMtaHTLRpI5G0QDh4XotyvbqFcVg+mXCoydK2LC3+88AhLizfyZ4vHOYx/xIe/sxZ2yVmxXOvvJ1Li1/i6otPH7i+m4s/ZcI9T/GHp4FjEXNLIkTno5QwtjjMBEEtQtJiY7NAPGm0M0HQLBL2Q7GGG1YIHBOzBYVqwqxl9pi5ZgP8+kzxd8pBNZm+th5HQ7M0NPJIT6JbIYkFIHBm1BqcCToXWiCbCDE8WLIFlBZ2hkwE1CToemVg7I4vb7y+myvueoxbrjmXd/L0UoUMM8WcwzjU5L5D43deeP5Z4Azev/sYWy/oWFZHDnnpIUfvaxZuaCGEoFKZvEzIyOOO/BiZaNLoRXIpyKzpS4xhBLWDBaoKgkBQLE4vqbmjkawXeYHIw2uVlxLt9N5M0CfCo4g1uhyIGB+/WcgGG40yabJ965tdxRu5/Tja3/rW3MsPcnv4OKd+ooz1gePgEQAtpBCI7h9Au+lgmgGjG2OaNvBjZILAMalJnXqSkCR1SkSs50xMJ0Bks7fVssCj5VewRI1GoycNSbPrR3/NLHpbgEOeoFkWlmWR14FycUjILdnrTxPZ7Z9j5jCDLUlwqRgjPr7V2ZqY3/wrv3AdfvjM+Xyrdh1nHienoIBugZR5rJ5AaLFZ0KcMfoYIHJwmFMOEsAhNkZGhYbkhiapTpYG3tkYulyPXF/egiYD1g5tAGyEHt6d0inkgb+EmCaFrYVnA5hZ7pFvdvriESYJrWYSJInEX2XhbsQhbEPOLPFL9LNfc8RqfP3wP13/kHcfeekv2o29zLEBZ6DT7kbgtN7FLwyvUTAQEQUAgwHJDQre7nGhHHPSaAyU1rDAhUYo0jfH9Kkk4uOecEdSgHtsgIyI5ILCCjqblkc2BMCwiNowylcUXzN16Dk7QjdCBgzkc2kdoIzdP8C7HAFlgksvlMB0xNjueLCx4aPIvkm9fzmXfyTBr93Pnep7T5leaz5w1s6WDIyC0BNGGTSkcvq9ZLq5F52Bg4GRARi0o6LQHt9wiD48q9dDCdQetZIig3TnkEA7oFSqss+aAKkk20QENXdYQWFhkBN4GdlUd1RTdIt892IjwyDN9K7JTWooRwS/pBfBYOEmerzEWEPMrPP69z1G88Uk+evP9/Oxr5y1lbzmTLQy9MruQVUQ3AwLZoOXXCaeV00ZekqJ92KUEayByZtID8hN+CA1r5AVSc6vYzrCPVkXHdAT5UsRBfNJFo3KW0ZagF5mt27F6khYFSpY1smOypBfALaK5CcqdX+5EMkfM/+a3t17Jvhue4Lyb7+Pn15/Pu5bYeGHuHKrhViW5fQVitWg8mBzF23KTQmlRGxZhCMLxKFe6dTSXKjnW9oEdLxaVMxHQRIdW4ch5UC+qztw4B9qSTbu0ha2/FTPF/OajN2G5glc/vJ9972vRuGP4B9h9QZnLCkcj74xmA/T6/HKB18IwIBLZeDSagHC8CVE8Q7YM5k0E2ZDABBFlKgPr6s5tm9KMk8gem4111st1kmITs1Cif4Si96KqJJrVj2gDe/SJPIGIwGTfwU0MOyYZO/JcjP/+XnD4V3/qfnuRR58D3vYId90O7wE4cy/7P33OUS9hZ4v5ny/xPMAThzn4xcNj9/fe9smjFHMbWagSztJmJnDWO0fUidXGMdcwo5j6WELOQJXAxKM6IRmp8zK1cGAGEBGUwk5bmSBY92iUU9JqjfU1kyiekNTTa01uAj51VyMLJIVSd37OV0h6dSy3+8BNWnsIopZP5eTRMv3nd1ZOwRxef/JuDhy4e+TqvXzzwL2dj1fey7XHIOa5iUbHg9Q/ksySxr6yDUNBL1HmSMJLPJTwkirfQBm2r9LRRJg0Vr5tK3+oQqpi31a2bSvbQGH4cxONUt/oJvHEyu5m7aSxrYxRX1K/Y5OOP/GEJKGOj7HyJ2b/pCr2/Y5vtjGUlKSUUiq2pycNDSZopbHybUMZhqGYmKw00mrsK9s2lNHz/XhnFG0z2y/mNFZjiWlprPz+wMbKX0B4R+qNiniE2FaGMUlwk8x1bMV+rNKu4KbX696faW/2/Y4NY0RUg2MxgdhX9ohTqT85k25qq76tjIWyCN9arP6rgRU7hh32L01W/D+zEvOKHcNKzCt2DCsxr9gx/A8iOdVPOAP0RAAAAABJRU5ErkJggg==" alt="image-20210320011047803"></p><p><img src="data:image/png;base64,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" alt="image-20210320011058615"></p><h5 id="_4-2-7-服务降级" tabindex="-1"><a class="header-anchor" href="#_4-2-7-服务降级" aria-hidden="true">#</a> 4.2.7 服务降级</h5><p><img src="/assets/image-20210320011937236-fd8f4cef.png" alt="image-20210320011937236"></p><p>Random LoadBalance</p><p>服务降级的概念，将一些服务临时停掉，保证资源最大化的利用，优先保证核心服务的运行。</p><ul><li><code>mock=&quot;force:return null&quot;</code> 表示消费方对该服务的方法调用都直接返回 null 值，不发起远程调用。用来屏蔽不重要服务不可用时对调用方的影响。</li><li>还可以改为 `mock=&quot;fail:return null&quot; 表示消费方对该服务的方法调用在失败后，再返回 null 值，不抛异常。用来容忍不重要服务不稳定时对调用方的影响。</li></ul><p>代码：</p><p><strong>情况一</strong>：</p><p>提供方：打开睡眠</p><p>调用方：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>    @Reference(version = &quot;v1.0&quot;,cluster = &quot;failover&quot;,mock = &quot;force:return null&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试：http://localhost:8000/user/find.do?id=1</p><p>结果：毫无反应</p><p><strong>情况二</strong>：</p><p>提供方：打开睡眠</p><p>调用方：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>    @Reference(version = &quot;v1.0&quot;,cluster = &quot;failover&quot;,mock = &quot;fail:return null&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试：http://localhost:8000/user/find.do?id=1</p><p>结果：调用方失败三次返回空</p><p>总结：</p><p>1互联网项目特点</p><p>高并发 海量数据</p><p>tps qps</p><p>伸缩性</p><p>2集群分布式</p><p>集群：同一个模块，部署多份，干同一份事儿。</p><p>分布式：多个模块做不同的事，总体完成一件事儿。</p><p>3架构演进</p><p>单体</p><p><img src="/assets/image-20210325173343020-cb3c366e.png" alt="image-20210325173343020"></p><p>垂直拆分</p><p><img src="/assets/image-20210325173414501-a97208a1.png" alt="image-20210325173414501"></p><p>分布式</p><p><img src="/assets/image-20210325173443164-f73533a7.png" alt="image-20210325173443164"></p><p>soa架构</p><p><img src="/assets/image-20210325173511827-3e30b488.png" alt="image-20210325173511827"></p><p>微服务架构</p><p><img src="/assets/image-20210325173643910-d91e844c.png" alt="image-20210325173643910"></p><p>4dubbo</p><p>阿里巴巴 Apache soa</p><p><img src="/assets/image-20210325174008478-82f580c5.png" alt="image-20210325174008478"></p><p>用法：提供方 @service注解</p><p>​ 调用方@Refrence</p><p>5高级特性</p><p>dubbo-admin</p><p>序列化： implements Serializable</p><p>地址缓存：zk挂了 还能调用</p><p>超时：</p><p>​ 提供方：timeout=1000</p><p>​ 调用方：timeout</p><p>重试：提供方 retries=2</p><p>多版本： 灰度上线</p><p>​ 提供：version=&quot;v2&quot;</p><p>​ 调用：version=&quot;v2</p><p>负载均衡：</p><p>​ 调用方：loadbalance = &quot;random&quot;</p><p>集群容错：</p><p>​ 调用方：cluster = &quot;failover&quot;</p><p>服务降级：砍掉功能</p><p>​ 调用方：mock = &quot;fail:return null&quot;</p><p>​ mock = &quot;force:return null&quot;</p><p>反馈：</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/BlueBeastMight/BlueBeastMight.github.io/edit/main/middleware/dubbo/README.md" rel="noopener noreferrer" target="_blank" aria-label="查看文章所在仓库"><!--[--><!--]--> 查看文章所在仓库 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/java/frameworks/springcloud/" class="" aria-label="springcloud笔记"><!--[--><!--]--> springcloud笔记 <!--[--><!--]--></a></span><span class="next"><a href="/middleware/elk/" class="" aria-label="ELK笔记"><!--[--><!--]--> ELK笔记 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-ef69076c.js" defer></script>
  </body>
</html>
